<mvc:View xmlns:form="sap.ui.layout.form" controllerName="bafar.flujos.flujos.controller.ActivoFijo.ActivoFijo"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:layout="sap.ui.layout"
    xmlns:unified="sap.ui.unified" displayBlock="true" height="100%" busyIndicatorDelay="0">
    <Panel expanded="true" expandable="true" headerText="Datos generales" width="auto" class="sapUiResponsiveMargin">
        <content>
            <form:Form editable="true" id="__formDatGen">
                <form:layout>
                    <form:ResponsiveGridLayout labelSpanXL="4" labelSpanL="4" labelSpanM="12" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0" columnsXL="2" columnsL="1" columnsM="1" singleContainerFullSize="false" />
                </form:layout>
                <form:formContainers>
                    <form:FormContainer title="" id="__containerDatGen">
                        <form:formElements>
                            <form:FormElement label="Tipo de movimiento" id="__labeTipoMovimiento">
                                <form:fields>
                                    <Select selectedKey="{datosGral>/in1}" items="{ path: 'tpMov>/', sorter: { path: 'tpMov>C2' } }" change="onSelect($event, 'tpMov')" forceSelection="false" enabled="{= !${afterCreation>/creation} ? ${afterCreation>/noEditField} : true}" class="valInput">
                                        <core:Item key="{tpMov>C1}" text="{tpMov>C2}"/>
                                    </Select>
                                </form:fields>
                            </form:FormElement>
                            <form:FormElement label="Sociedad" id="__labelSociedad">
                                <form:fields>
                                    <Select selectedKey="{datosGral>/in2}" items="{ path: 'sociedad>/', sorter: { path: 'sociedad>C2' } }" change="onSelect($event, 'sociedad')" forceSelection="false" enabled="{= !${afterCreation>/creation} ? ${afterCreation>/noEditField} : true}" class="valInput">
                                        <core:Item key="{sociedad>C1}" text="{sociedad>C2}"/>
                                    </Select>
                                </form:fields>
                            </form:FormElement>
                            <form:FormElement label="Sociedad destino" id="__labelSociedadDestino" visible="{viewModel>/socDestVisible}">
                                <form:fields>
                                    <Select selectedKey="{datosGral>/in3}" items="{ path: 'socDest>/', sorter: { path: 'socDest>C2' } }" change="onSelect($event, 'socDest')" forceSelection="false" enabled="{= !${afterCreation>/creation} ? ${afterCreation>/noEditField} : true}" class="valInputSocDest">
                                        <core:Item key="{socDest>C1}" text="{socDest>C2}"/>
                                    </Select>
                                </form:fields>
                            </form:FormElement>
                            <form:FormElement label="Fecha movimiento" id="__labelFechaMov" >
                                <form:fields>
                                    <DatePicker valueFormat="yyyyMMdd" class="valInput" editable="{= !${afterCreation>/creation} ?  ${afterCreation>/enabled} : true}" value="{datosGral>/in4}"/>
                                </form:fields>
                            </form:FormElement>
                            <form:FormElement label="Justificación" id="__labelJust">
                                <form:fields>
                                    <TextArea width="100%" id="__inputJust" value="{datosGral>/in5}" class="valInput"/>
                                </form:fields>
                            </form:FormElement>
                        </form:formElements>
                    </form:FormContainer>
                </form:formContainers>
            </form:Form>
        </content>
    </Panel>
    <Panel expanded="true" expandable="true" headerText="Datos facturación" width="auto" class="sapUiResponsiveMargin" visible="{viewModel>/factVisible}">
        <content>
            <form:Form editable="true" id="__formDatFact">
                <form:layout>
                    <form:ResponsiveGridLayout labelSpanXL="4" labelSpanL="4" labelSpanM="12" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0" columnsXL="2" columnsL="1" columnsM="1" singleContainerFullSize="false" />
                </form:layout>
                <form:formContainers>
                    <form:FormContainer title="" id="__containerDatFac">
                        <form:formElements>
                            <form:FormElement label="RFC" id="__labelRfc">
                                <form:fields>
                                    <Input width="100%" id="__inputRfc" value="{datosGral>/in6}" maxLength="13" liveChange="onRFCInput" class="valInputFac"/>
                                </form:fields>
                            </form:FormElement>
                            <form:FormElement label="Nombre / Razón Social" id="__labelNombreRs">
                                <form:fields>
                                    <Input width="100%" id="__inputNombreRs" value="{datosGral>/in7}" class="valInputFac"/>
                                </form:fields>
                            </form:FormElement>
                            <form:FormElement label="Domicilio" id="__labelDomicilio">
                                <Input width="100%" id="__inputDomicilio" class="valInputFac" value="{datosGral>/in8}"/>
                            </form:FormElement>
                            <form:FormElement label="Ciudad/País">
                                <form:fields>
                                    <Input width="100%" id="__inputCiudad" value="{datosGral>/in9}" class="valInputFac"/>
                                    <Input width="100%" id="__inputPais" value="{datosGral>/in10}" class="valInputFac">
                                        <layoutData>
                                            <layout:GridData span="XL2 L2 M2 S4" />
                                        </layoutData>
                                    </Input>
                                </form:fields>
                            </form:FormElement>
                        </form:formElements>
                    </form:FormContainer>
                </form:formContainers>

            </form:Form>
        </content>
    </Panel>
    <Panel expanded="true" expandable="true" headerText="Datos Activo" width="auto" class="sapUiResponsiveMargin">
        <Toolbar height="4rem">
            <content>
                <Title id="listTitle" class="sapUiSmallMarginBegin" titleStyle="H4"/>
                <ToolbarSpacer id="space1"/>
                <layout:HorizontalLayout allowWrapping="false">
                    <layout:content>
                        <Label id="cargaXLSX" text="{i18n>cargandoXLSX}" class="blink" visible="false"/>
                        <Button icon="sap-icon://add" class="sapUiTinyMarginEnd" type="Transparent" press="onAddLine" visible="{= !${afterCreation>/creation} ? false : true}"/>
                        <Button id="toolbarDel" icon="sap-icon://delete" class="sapUiTinyMarginEnd" type="Transparent" press="onRemoveLines" enabled="false" visible="{= !${afterCreation>/creation} ? false : true}"/>
                        <unified:FileUploader id="tempUpload" buttonText="{= ${device>/system/phone}?'':${i18n>XLSXload}}" iconOnly="true" buttonOnly="true" icon="sap-icon://upload" uploadComplete="handleTempUploadCompleted" uploadOnChange="true" uploadStart="onHandleTempUploadStart" change="onHandleTempUploadStart" class="sapUiTinyMarginEnd" busy="{tablaFlujo>atta}" sameFilenameAllowed="true" fileType="xlsx" visible="{= !${afterCreation>/creation} ? false : true}"/>
                        <Button id="toolbarDown" text="{= ${device>/system/phone}?'':${i18n>XLSXdown}}" icon="sap-icon://download" tooltip="{i18n>XLSXdown}" press="onDownTemplate" type="Transparent" visible="{= !${afterCreation>/creation} ? false : true}"/>
                    </layout:content>
                </layout:HorizontalLayout>
            </content>
        </Toolbar>
        <ScrollContainer height="100%" width="100%" vertical="true" focusable="true">

            <Table id="mainTable" width="auto" items="{path:'tablaFlujo>/', templateShareable:false}" noDataText="{flujoTablaView.itemTableNoDataText}" busyIndicatorDelay="{detailView>/lineItemTableDelay}" mode="{= !${afterCreation>/creation} ? 'None' : 'MultiSelect'}" selectionChange="mainTabSelect" fixedLayout="false" updateFinished="onTableUpdateFinished">
                <columns>
                    <Column visible="{= !${afterCreation>/creation} ?  true : false}">
                        <Text text="Aprobar"/>
                    </Column>
                    <Column>
                        <Text text="Item" width="100px"/>
                    </Column>
                    <Column hAlign="End">
                        <Text text="No. Activo" width="100px"/>
                    </Column>
                    <Column hAlign="End">
                        <Text text="Sub. No." width="60px"/>
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true" hAlign="End">
                        <Text text="No. Serie" width="100px"/>
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true" hAlign="End">
                        <Text text="Etiqueta" width="80px"/>
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true" hAlign="End">
                        <Text text="CeCo" width="100px"/>
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true" hAlign="End">
                        <Text text="Valor contable" width="100px"/>
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true" hAlign="End" visible="{viewModel>/cecoVisible}">
                        <Text text="CeCo Destino" width="100px"/>
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true" hAlign="End" visible="{viewModel>/precioVentaVisible}">
                        <Text text="Precio de venta" width="100px"/>
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true" hAlign="End" visible="{= !${afterCreation>/creation} ?  false : true}">
                        <Text text="Documentacion" width="100px"/>
                    </Column>
                </columns>
                <items>
                    <ColumnListItem class="lineItemSucc" highlight="Success">
                        <cells>
                            <HBox id="switchitoBox">
                                <Switch id="switchito" state="true" type="AcceptReject" visible="{= !${afterCreation>/creation} ?  true : false}" change="switchChanged"/>
                                <core:Icon src="sap-icon://comment" press="_showMotivo" class="sapUiTinyMarginBeginEnd" visible="{= ${tablaFlujo>rejectText} !== '' ? true : false }"/>
                            </HBox>
                            <Text id="attachPopover" text="{tablaFlujo>vis1}"/>
                            <Input value="{tablaFlujo>in1}" maxLength="12" submit="onInputChange($event, 'in1')" class="valInput" liveChange="onInputLive($event, 'NUM')" editable="{= ${afterCreation>/noEditField} &amp;&amp; ${datosGral>/in2} !== ''}"/>
                            <Input value="{tablaFlujo>in2}" maxLength="4" submit="onInputChange($event, 'in2')" class="valInput" liveChange="onInputLive($event, 'NUM')" editable="{= !${afterCreation>/creation} ?  ${afterCreation>/enabled} : true}"/>
                            <Text text="{tablaFlujo>vis2}"/>
                            <Text text="{tablaFlujo>vis3}"/>
                            <Text text="{tablaFlujo>vis4}"/>
                            <Text text="{tablaFlujo>vis5}"/>
                            <Input value="{tablaFlujo>in3}" change="onInputChange($event, 'in3')" class="valInputCeco" editable="{= !${afterCreation>/creation} ?  ${afterCreation>/enabled} : true}"/>
                            <Input value="{tablaFlujo>in4}" change="formatCurrency($event, 'in4')" class="valInputPrecioVenta" editable="{= !${afterCreation>/creation} ?  ${afterCreation>/enabled} : true}"/>
                            <unified:FileUploader iconOnly="true" buttonOnly="true" icon="sap-icon://attachment" uploadComplete="onHandleUploadComplete" uploadOnChange="true" uploadStart="onHandleUploadStart" change="onHandleUploadStart" class="sapUiTinyMarginEnd" iconHovered="sap-icon://accelerated" busy="{tablaFlujo>atta}" enabled="{= ${tablaFlujo>vis2} ? true : false}" visible="{= !${afterCreation>/creation} ?  false : true}"/>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </ScrollContainer>
    </Panel>
</mvc:View>